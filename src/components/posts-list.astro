---
import { getCollection } from "astro:content";
import { formatMonthYearShort } from "../lib/utils";

const posts = await getCollection("posts");

posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<div class="flex flex-col gap-1">
  {
    posts.map((post) => {
      const slug = post.id.replace(/^posts\//, "").replace(/\.md$/, "");
      const displayDate = formatMonthYearShort(post.data.date);
      return (
        <a href={`/posts/${slug}`} class="hover:underline flex items-center gap-2">
          <small class="muted">{displayDate}</small>
          {post.data.title}
        </a>
      );
    })
  }
</div>

